import 'package:location/location.dart';import 'dart:async';import 'user_location.dart';class LocationService {  // UserLocation _currentLocation;  var location = Location();  StreamController<UserLocation> _locationControllerStream = StreamController<UserLocation>();  Stream<UserLocation> get locationStream => _locationControllerStream.stream;  LocationService() {    // Request permission to use location    location.requestPermission().then((permissionStatus) {      if (permissionStatus == PermissionStatus.granted) {        // If granted listen to the onLocationChanged stream and emit over our controller        location.onLocationChanged.listen((locationData) {          if (locationData != null) {            _locationControllerStream.add(UserLocation(              latitude: locationData.latitude,              longitude: locationData.longitude,            ));          }        });      }    });  }}